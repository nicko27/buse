<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Table Simple - nvTblHandler</title>
    <link rel="stylesheet" href="/assets/css/table-styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="/assets/libs/nvTblHandler/nvTblHandler.js"></script>
</head>
<body>
    <div class="block">
        <div class="block__title glass">
            <div class="block__title-left">
                Table Simple avec Édition
            </div>
        </div>

        <div class="block__content">
            <table id="simpleTable">
                <thead>
                    <tr>
                        <th id="id" th-hide>ID</th>
                        <th th-edit th-sort id="name">Nom</th>
                        <th th-edit th-validate='{"type": "email"}' id="email">Email</th>
                        <th th-choice id="status">Statut</th>
                        <th th-actions="delete,save">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr id="1">
                        <td>1</td>
                        <td>John Doe</td>
                        <td>john@example.com</td>
                        <td>active</td>
                        <td></td>
                    </tr>
                    <tr id="2">
                        <td>2</td>
                        <td>Jane Smith</td>
                        <td>jane@example.com</td>
                        <td>inactive</td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const table = new NvTblHandler({
                tableId: 'simpleTable',
                debug: true,
                plugins: {
                    names: ['Edit', 'Hide', 'Sort', 'Actions', 'Choice', 'Validate'],
                    choice: {
                        choiceAttribute: 'th-choice',
                        choices: {
                            'status': {
                                values: [
                                    { value: 'active', label: 'Actif' },
                                    { value: 'inactive', label: 'Inactif' }
                                ]
                            }
                        }
                    },
                    actions: {
                        actionAttribute: 'th-actions',
                        buttonClass: 'th-action-btn',
                        containerClass: 'th-actions',
                        useIcons: true,
                        actions: {
                            save: function(context) {
                                if (!context.tableHandler.isRowModified(context.row)) {
                                    alert('Aucune modification');
                                    return;
                                }
                                console.log('Saving:', context.data);
                                alert('Sauvegarde effectuée');
                            },
                            delete: function(context) {
                                if (confirm('Êtes-vous sûr de vouloir supprimer cette ligne ?')) {
                                    console.log('Deleting:', context.data);
                                    context.tableHandler.removeRow(context.row);
                                }
                            }
                        },
                        icons: {
                            delete: '<i class="fa fa-trash"></i>',
                            save: '<i class="fa fa-save"></i>'
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
