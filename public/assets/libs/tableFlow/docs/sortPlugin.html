<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Documentation SortPlugin - nvTblHandler</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            background-color: #f7f7f9;
            color: #333;
            padding: 20px;
            max-width: 900px;
            margin: auto;
        }
        h1, h2, h3 {
            color: #1d72b8;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
        }
        th {
            background-color: #f4f4f4;
            text-align: left;
        }
        pre {
            background-color: #f8f8f8;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
            margin-bottom: 20px;
        }
        code {
            background-color: #f0f0f0;
            padding: 2px 4px;
            border-radius: 3px;
        }
        .note {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
        }
        .example {
            background-color: #e8f4fd;
            border-left: 4px solid #1d72b8;
            padding: 15px;
            margin: 15px 0;
        }
    </style>
</head>
<body>

<h1>Documentation SortPlugin - nvTblHandler</h1>

<p>Le plugin <code>SortPlugin</code> ajoute des fonctionnalités de tri aux colonnes de votre tableau HTML. Il permet de trier les données en ordre croissant, décroissant ou de revenir à l'ordre initial.</p>

<h2>Caractéristiques Principales</h2>
<ul>
    <li>Tri multi-colonnes avec cycle asc/desc/none</li>
    <li>Support du tri numérique et alphabétique</li>
    <li>Icônes de tri personnalisables</li>
    <li>Conservation de l'ordre initial des données</li>
    <li>Intégration avec le plugin de pagination</li>
    <li>Tri sensible à la casse et aux accents</li>
    <li>Support des valeurs complexes (wrapper, formatage)</li>
</ul>

<h2>Configuration</h2>
<p>Exemple de configuration du plugin :</p>
<pre><code>const table = new NvTblHandler({
    tableId: 'monTableau',
    plugins: {
        Sort: {
            sortableAttribute: 'th-sort',
            showIcons: true,
            icons: {
                asc: '<i class="fa fa-sort-asc"></i>',
                desc: '<i class="fa fa-sort-desc"></i>',
                none: '<i class="fa fa-sort"></i>'
            },
            debug: false
        }
    }
});</code></pre>

<h2>Options de Configuration</h2>
<table>
    <thead>
        <tr>
            <th>Option</th>
            <th>Type</th>
            <th>Description</th>
            <th>Défaut</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>sortableAttribute</code></td>
            <td>string</td>
            <td>Attribut HTML pour marquer les colonnes triables</td>
            <td>'th-sort'</td>
        </tr>
        <tr>
            <td><code>showIcons</code></td>
            <td>boolean</td>
            <td>Afficher les icônes de tri</td>
            <td>true</td>
        </tr>
        <tr>
            <td><code>icons</code></td>
            <td>object</td>
            <td>Configuration des icônes de tri</td>
            <td>{ asc: '↑', desc: '↓', none: '⇅' }</td>
        </tr>
        <tr>
            <td><code>debug</code></td>
            <td>boolean</td>
            <td>Active les logs de débogage</td>
            <td>false</td>
        </tr>
    </tbody>
</table>

<h2>Méthodes Publiques</h2>
<table>
    <thead>
        <tr>
            <th>Méthode</th>
            <th>Arguments</th>
            <th>Description</th>
            <th>Retour</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>init(tableHandler)</code></td>
            <td>tableHandler: object</td>
            <td>Initialise le plugin avec l'instance de nvTblHandler</td>
            <td>void</td>
        </tr>
        <tr>
            <td><code>sortTable(columnIndex, order)</code></td>
            <td>columnIndex: number, order: string</td>
            <td>Trie la table selon la colonne et l'ordre spécifiés</td>
            <td>void</td>
        </tr>
        <tr>
            <td><code>destroy()</code></td>
            <td>-</td>
            <td>Nettoie les modifications et supprime les événements</td>
            <td>void</td>
        </tr>
    </tbody>
</table>

<h2>Structure HTML</h2>
<p>Exemple de structure HTML avec colonnes triables :</p>
<pre><code>&lt;table id="monTableau"&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th th-sort&gt;ID&lt;/th&gt;
            &lt;th th-sort&gt;Nom&lt;/th&gt;
            &lt;th th-sort&gt;Email&lt;/th&gt;
            &lt;th th-sort&gt;Score&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
        &lt;tr&gt;
            &lt;td&gt;1&lt;/td&gt;
            &lt;td&gt;Jean Dupont&lt;/td&gt;
            &lt;td&gt;jean@example.com&lt;/td&gt;
            &lt;td&gt;85&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;2&lt;/td&gt;
            &lt;td&gt;Marie Martin&lt;/td&gt;
            &lt;td&gt;marie@example.com&lt;/td&gt;
            &lt;td&gt;92&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table&gt;</code></pre>

<h2>Styles CSS</h2>
<p>Styles recommandés pour personnaliser l'apparence des en-têtes triables :</p>
<pre><code>th[th-sort] {
    cursor: pointer;
    user-select: none;
    position: relative;
    padding-right: 20px; /* Espace pour l'icône */
}

th[th-sort]:hover {
    background-color: rgba(0, 0, 0, 0.05);
}

.sort-icon {
    position: absolute;
    right: 5px;
    top: 50%;
    transform: translateY(-50%);
    opacity: 0.5;
}

th[th-sort]:hover .sort-icon {
    opacity: 1;
}</code></pre>

<h2>Intégration avec d'autres plugins</h2>
<ul>
    <li><strong>Plugin Pagination</strong> :
        <ul>
            <li>Gestion automatique de la pagination lors du tri</li>
            <li>Préservation de la page courante après le tri</li>
        </ul>
    </li>
    <li><strong>Plugin Filter</strong> :
        <ul>
            <li>Le tri s'applique uniquement aux lignes visibles</li>
            <li>Maintien de la cohérence des filtres après le tri</li>
        </ul>
    </li>
    <li><strong>Plugin Edit</strong> :
        <ul>
            <li>Les modifications sont préservées lors du tri</li>
            <li>Support du tri des cellules éditées</li>
        </ul>
    </li>
</ul>

<h2>Comportement du Tri</h2>
<table>
    <thead>
        <tr>
            <th>Type de Données</th>
            <th>Comportement</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Numérique</td>
            <td>Tri numérique (1, 2, 10 au lieu de 1, 10, 2)</td>
        </tr>
        <tr>
            <td>Texte</td>
            <td>Tri alphabétique insensible à la casse et aux accents</td>
        </tr>
        <tr>
            <td>Date</td>
            <td>Tri chronologique si format reconnu</td>
        </tr>
        <tr>
            <td>Mixte</td>
            <td>Tri naturel avec support des nombres dans le texte</td>
        </tr>
    </tbody>
</table>

<h2>Cycle de Tri</h2>
<table>
    <thead>
        <tr>
            <th>État</th>
            <th>Description</th>
            <th>Icône</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Non trié</td>
            <td>Ordre initial des données</td>
            <td>⇅</td>
        </tr>
        <tr>
            <td>Ascendant</td>
            <td>Du plus petit au plus grand</td>
            <td>↑</td>
        </tr>
        <tr>
            <td>Descendant</td>
            <td>Du plus grand au plus petit</td>
            <td>↓</td>
        </tr>
    </tbody>
</table>

<div class="note">
<h3>Notes Importantes</h3>
<ul>
    <li>Le tri préserve l'ordre initial des données pour retour à l'état d'origine</li>
    <li>Les événements de clic sont capturés en phase de capture pour éviter les conflits</li>
    <li>Le tri s'adapte automatiquement au type de données dans la colonne</li>
    <li>Les icônes de tri sont personnalisables via Font Awesome ou autres bibliothèques</li>
    <li>Le plugin gère automatiquement les interactions avec la pagination</li>
</ul>
</div>

</body>
</html>
